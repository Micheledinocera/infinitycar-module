<section class="form-section" [formGroup]="formGroup">
  <h2>Informazioni Personali</h2>

  <div class="form-row">
    <div class="form-group">
      <p-iftalabel>
        <label for="firstName">Nome *</label>
        <input
          type="text"
          id="firstName"
          formControlName="firstName"
          class="form-input"
          pInputText
          [class.error]="submitted() && firstName?.invalid"
        />
      </p-iftalabel>
      @if (submitted() && firstName?.invalid) {
        <span class="error-message">
          @if (firstName?.errors?.['required']) { Nome è obbligatorio }
          @if (firstName?.errors?.['minlength']) { Minimo 2 caratteri }
        </span>
      }
    </div>

    <div class="form-group">
      <p-iftalabel>
        <label for="lastName">Cognome *</label>
        <input
          type="text"
          id="lastName"
          formControlName="lastName"
          class="form-input"
          pInputText
          [class.error]="submitted() && lastName?.invalid"
        />
      </p-iftalabel>
      @if (submitted() && lastName?.invalid) {
        <span class="error-message">
          @if (lastName?.errors?.['required']) { Cognome è obbligatorio }
          @if (lastName?.errors?.['minlength']) { Minimo 2 caratteri }
        </span>
      }
    </div>
  </div>

  <div class="form-row">
    <div class="form-group">
      <p-iftalabel>
        <label for="codFiscale">Codice Fiscale *</label>
        <input
          type="text"
          id="codFiscale"
          formControlName="codFiscale"
          class="form-input"
          pInputText
          placeholder="es. RSSMRA80A01H501T"
          [class.error]="submitted() && codFiscale?.invalid"
        />
      </p-iftalabel>
      @if (submitted() && codFiscale?.invalid) {
        <span class="error-message">Codice Fiscale non valido</span>
      }
    </div>

    <div class="form-group">
      <p-iftalabel>
        <label for="phone">Telefono *</label>
        <input
          type="tel"
          id="phone"
          formControlName="phone"
          class="form-input"
          pInputText
          placeholder="es. +39 123 456 7890"
          [class.error]="submitted() && phone?.invalid"
        />
      </p-iftalabel>
      @if (submitted() && phone?.invalid) {
        <span class="error-message">Telefono non valido</span>
      }
    </div>
  </div>

  <div class="form-row">
    <div class="form-group full-width">
      <p-iftalabel>
        <label for="email">Email *</label>
        <input
          type="email"
          id="email"
          formControlName="email"
          class="form-input"
          pInputText
          [class.error]="submitted() && email?.invalid"
        />
      </p-iftalabel>
      @if (submitted() && email?.invalid) {
        <span class="error-message">Email non valida</span>
      }
    </div>
  </div>

  <div class="form-row">
    <div class="form-group full-width">
      <p-iftalabel>
        <label for="confirmEmail">Conferma Email *</label>
        <input
          type="email"
          id="confirmEmail"
          formControlName="confirmEmail"
          class="form-input"
          pInputText
          [class.error]="submitted() && (confirmEmail?.invalid || formGroup.errors?.['emailMismatch'])"
        />
      </p-iftalabel>
      @if (submitted() && confirmEmail?.invalid) {
        <span class="error-message">Email di conferma è obbligatoria</span>
      }
      @if (submitted() && formGroup.errors?.['emailMismatch']) {
        <span class="error-message">Le email non coincidono</span>
      }
    </div>
  </div>
</section>
